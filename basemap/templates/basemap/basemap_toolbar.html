{% extends "basemap/basemap.html" %}

{% block toolbar %}
<style>

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  right:0;
  background-color: #f1f1f1;
  min-width: 160px;
  overflow: auto;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.show {display: block;}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;


}

</style>
<header class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="{% url 'basemap_list' %}">Doopy Maps</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="form-group">
            <form action ="" method="post" class="navbar-form navbar-left my-2 my-lg-0">
                {% csrf_token %}
                <div class="row">
                    <div class="col-sm">
                        {{form.name}}
                    </div>
                    <div class="col-sm">
                        {{form.style}}
                    </div>
                    {{form.zoom}}
                    {{form.location}}
                    <div class="col-sm">
                        <button type="submit" class="btn btn-outline-success my-2 my-lg-0">Save</button>
                    </div>

                </div>
            </form>
        </div>
    </div>
    <div class="col-sm">
        {% if user.is_authenticated %}
            
        <div class="dropdown">
            <button onclick="loginDropdown()" class="btn btn-outline-success my-2 my-lg-0 loginBtn">{{user}}<i class="fa fa-caret-down"></i></button>
            <div id="loginDropdown" class="dropdown-content">
                <a href="{% url 'logout'%}?next={{request.path}}">logout</a>
                <a href="{% url 'password_change' %}">Change password</a>
            </div>
        </div>
        {% else %}
            <a href="{% url 'login'%}?next={{request.path}}" class="btn btn-outline-success my-2 my-lg-0">Login</a>
        {% endif %}
    </div>
</header>

<script>
    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    
    function loginDropdown() {
        document.getElementById("loginDropdown").classList.toggle("show");
        console.log('bamn1');
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
        if (!event.target.matches('.loginBtn')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            if (dropdowns.classList.contains('show')) {
                    dropdowns.classList.remove('show');
            }
        }
        console.log('bamn2');
    }
</script>
{% endblock %}